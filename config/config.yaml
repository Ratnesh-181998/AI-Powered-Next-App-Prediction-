# iPhone App Prediction System Configuration

# Data Paths
data:
  raw_data_path: "data/raw/"
  processed_data_path: "data/processed/"
  sample_data_path: "data/sample/"
  features_file: "data/processed/features.parquet"
  
# Model Paths
model:
  model_dir: "models/"
  xgboost_model: "models/xgboost_v1.pkl"
  lightgbm_model: "models/lightgbm_v1.pkl"
  transformer_model: "models/transformer_v1.pt"
  ensemble_model: "models/ensemble_v1.pkl"

# Feature Engineering
features:
  num_apps: 50
  sequence_length: 10
  time_buckets: 24
  location_buckets: 100
  
  # Real-time features
  real_time_features:
    - time_since_last_use
    - last_app
    - second_last_app
    - third_last_app
    - session_duration
    
  # Contextual features
  contextual_features:
    - hour_of_day
    - day_of_week
    - is_weekend
    - location_bucket
    - battery_level
    - is_charging
    - network_type
    
  # Historical features
  historical_features:
    - app_usage_24h
    - app_usage_7d
    - transition_probabilities
    - avg_session_duration

# XGBoost Hyperparameters
xgboost:
  objective: "multi:softprob"
  num_class: 50
  max_depth: 8
  learning_rate: 0.1
  n_estimators: 1000
  subsample: 0.8
  colsample_bytree: 0.8
  min_child_weight: 3
  gamma: 0.1
  random_state: 42
  n_jobs: -1

# LightGBM Hyperparameters
lightgbm:
  objective: "multiclass"
  num_class: 50
  max_depth: 8
  learning_rate: 0.1
  n_estimators: 1000
  subsample: 0.8
  colsample_bytree: 0.8
  min_child_samples: 20
  random_state: 42
  n_jobs: -1

# Transformer Hyperparameters
transformer:
  d_model: 128
  nhead: 4
  num_layers: 2
  dim_feedforward: 512
  dropout: 0.1
  max_seq_length: 50
  batch_size: 64
  learning_rate: 0.001
  num_epochs: 50

# Training Configuration
training:
  test_size: 0.2
  validation_size: 0.1
  random_state: 42
  stratify: true
  time_series_split: true
  n_splits: 5

# API Configuration
api:
  host: "0.0.0.0"
  port: 5000
  debug: false
  workers: 4
  timeout: 30
  max_requests: 1000
  
# Privacy Settings
privacy:
  hash_user_ids: true
  hash_algorithm: "sha256"
  location_granularity: "city"
  anonymize_data: true
  data_retention_days: 30

# Monitoring
monitoring:
  enable_mlflow: true
  mlflow_tracking_uri: "http://localhost:5000"
  enable_wandb: false
  log_predictions: true
  log_features: false
  
# Performance Thresholds
thresholds:
  min_accuracy: 0.85
  max_latency_ms: 100
  min_confidence: 0.3
  
# AWS Configuration (Optional)
aws:
  region: "us-east-1"
  s3_bucket: "app-prediction-data"
  sagemaker_role: "arn:aws:iam::123456789:role/SageMakerRole"
  endpoint_name: "app-prediction-prod"
